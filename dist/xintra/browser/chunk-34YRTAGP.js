import{A as Y,C as Z,c as U,e as v,g as H,h as J,n as K,o as Q,r as W,t as X}from"./chunk-LWEV5N6L.js";import{i as $,k as I,o as V}from"./chunk-6SH7557L.js";import{Ba as F,Ca as S,Hc as a,Ic as y,Jc as q,Ma as w,Na as j,Qb as b,Qd as z,Rd as x,Vb as m,Wb as R,Xb as B,ce as G,hc as o,ic as r,jc as p,nc as O,q as u,qa as L,ra as E,tc as c,vc as A,yb as l,zb as f}from"./chunk-XJ56SYHS.js";import"./chunk-DW7GCGLI.js";import{a as P,b as C}from"./chunk-BI7C37SH.js";var k=(()=>{class e{planes=[{id:1,nombre:"Plan B\xE1sico",descripcion:"Cobertura b\xE1sica de servicios m\xE9dicos",usosMensuales:3,activo:!0},{id:2,nombre:"Plan Premium",descripcion:"Cobertura completa con servicios adicionales",usosMensuales:5,activo:!0},{id:3,nombre:"Plan Familiar",descripcion:"Cobertura extendida para toda la familia",usosMensuales:8,activo:!0}];getPlanes(){return u(this.planes.filter(t=>t.activo))}getPlanById(t){return u(this.planes.find(n=>n.id===t))}crearPlan(t){let n=C(P({},t),{id:Math.max(...this.planes.map(i=>i.id))+1,activo:!0});return this.planes.push(n),u(n)}actualizarPlan(t){let n=this.planes.findIndex(i=>i.id===t.id);return n!==-1?(this.planes[n]=P({},t),u(this.planes[n])):u(t)}eliminarPlan(t){let n=this.planes.findIndex(i=>i.id===t);return n!==-1?(this.planes[n].activo=!1,u(!0)):u(!1)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function oe(e,d){if(e&1){let t=O();o(0,"tr")(1,"td"),a(2),r(),o(3,"td"),a(4),r(),o(5,"td",22),a(6),r(),o(7,"td")(8,"button",23),c("click",function(){let i=w(t).$implicit,s=A();return j(s.editarPlan(i.id))}),p(9,"i",24),a(10," Editar "),r(),o(11,"button",25),c("click",function(){let i=w(t).$implicit,s=A();return j(s.confirmarEliminacion(i.id))}),p(12,"i",26),a(13," Eliminar "),r()()()}if(e&2){let t=d.$implicit;l(2),y(t.nombre),l(2),y(t.descripcion),l(2),y(t.usosMensuales)}}function ae(e,d){e&1&&(o(0,"tr")(1,"td",27),a(2,"No hay planes registrados"),r()())}function le(e,d){e&1&&p(0,"div",28)}var te=(()=>{class e{planesService;router;planes=[];mostrarConfirmacion=!1;planAEliminar=null;constructor(t,n){this.planesService=t,this.router=n}ngOnInit(){this.cargarPlanes()}cargarPlanes(){this.planesService.getPlanes().subscribe(t=>{this.planes=t})}crearNuevoPlan(){this.router.navigate(["/apps/planes/nuevo"])}editarPlan(t){this.router.navigate(["/apps/planes/editar",t])}confirmarEliminacion(t){this.planAEliminar=t,this.mostrarConfirmacion=!0}eliminarPlan(){this.planAEliminar&&this.planesService.eliminarPlan(this.planAEliminar).subscribe(()=>{this.cargarPlanes(),this.cerrarConfirmacion()})}cerrarConfirmacion(){this.mostrarConfirmacion=!1,this.planAEliminar=null}static \u0275fac=function(n){return new(n||e)(f(k),f(I))};static \u0275cmp=F({type:e,selectors:[["app-planes"]],decls:39,vars:7,consts:[[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"btn","btn-primary",3,"click"],[1,"ti","ti-plus"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["class","modal-backdrop fade show",4,"ngIf"],[1,"text-center"],[1,"btn","btn-warning","btn-sm","me-2",3,"click"],[1,"ti","ti-edit"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"ti","ti-trash"],["colspan","4",1,"text-center"],[1,"modal-backdrop","fade","show"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),a(4,"Planes de Salud"),r(),o(5,"button",4),c("click",function(){return i.crearNuevoPlan()}),p(6,"i",5),a(7," Nuevo Plan "),r()()(),o(8,"div",6)(9,"div",7)(10,"table",8)(11,"thead")(12,"tr")(13,"th"),a(14,"Nombre"),r(),o(15,"th"),a(16,"Descripci\xF3n"),r(),o(17,"th"),a(18,"Usos Mensuales"),r(),o(19,"th"),a(20,"Acciones"),r()()(),o(21,"tbody"),b(22,oe,14,3,"tr",9)(23,ae,3,0,"tr",10),r()()(),o(24,"div",11)(25,"div",12)(26,"div",13)(27,"div",14)(28,"h5",15),a(29,"Confirmar Eliminaci\xF3n"),r(),o(30,"button",16),c("click",function(){return i.cerrarConfirmacion()}),r()(),o(31,"div",17),a(32," \xBFEst\xE1 seguro que desea eliminar este plan de salud? "),r(),o(33,"div",18)(34,"button",19),c("click",function(){return i.cerrarConfirmacion()}),a(35," Cancelar "),r(),o(36,"button",20),c("click",function(){return i.eliminarPlan()}),a(37," Confirmar Eliminaci\xF3n "),r()()()()(),b(38,le,1,0,"div",21),r()()),n&2&&(l(22),m("ngForOf",i.planes),l(),m("ngIf",i.planes.length===0),l(),R("display",i.mostrarConfirmacion?"block":"none"),B("show",i.mostrarConfirmacion),l(14),m("ngIf",i.mostrarConfirmacion))},dependencies:[z,x],encapsulation:2})}return e})();function se(e,d){e&1&&(o(0,"div",16),a(1," El nombre es requerido "),r())}function me(e,d){e&1&&(o(0,"div",16),a(1," El nombre debe tener al menos 3 caracteres "),r())}function ce(e,d){e&1&&(o(0,"div",16),a(1," La descripci\xF3n es requerida "),r())}function de(e,d){e&1&&(o(0,"div",16),a(1," La descripci\xF3n debe tener al menos 10 caracteres "),r())}function pe(e,d){e&1&&(o(0,"div",16),a(1," Los usos mensuales son requeridos "),r())}function ue(e,d){e&1&&(o(0,"div",16),a(1," Los usos mensuales deben estar entre 1 y 31 "),r())}var D=(()=>{class e{fb;planesService;router;route;planForm;modoEdicion=!1;planId=null;constructor(t,n,i,s){this.fb=t,this.planesService=n,this.router=i,this.route=s,this.planForm=this.fb.group({nombre:["",[v.required,v.minLength(3)]],descripcion:["",[v.required,v.minLength(10)]],usosMensuales:["",[v.required,v.min(1),v.max(31)]]})}ngOnInit(){let t=this.route.snapshot.params.id;t&&(this.modoEdicion=!0,this.planId=+t,this.cargarPlan(this.planId))}cargarPlan(t){this.planesService.getPlanById(t).subscribe(n=>{n&&this.planForm.patchValue({nombre:n.nombre,descripcion:n.descripcion,usosMensuales:n.usosMensuales})})}guardar(){if(this.planForm.valid)if(this.modoEdicion&&this.planId){let t=C(P({id:this.planId},this.planForm.value),{activo:!0});this.planesService.actualizarPlan(t).subscribe(()=>{this.router.navigate(["/apps/planes"])})}else this.planesService.crearPlan(this.planForm.value).subscribe(()=>{this.router.navigate(["/apps/planes"])})}cancelar(){this.router.navigate(["/apps/planes"])}static \u0275fac=function(n){return new(n||e)(f(Y),f(k),f(I),f($))};static \u0275cmp=F({type:e,selectors:[["app-plan-form"]],decls:33,vars:10,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-4"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","nombre","placeholder","Ingrese el nombre del plan",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["formControlName","descripcion","placeholder","Ingrese la descripci\xF3n del plan","rows","2",1,"form-control"],["type","number","formControlName","usosMensuales","placeholder","Cantidad m\xE1xima de usos por mes",1,"form-control"],[1,"mt-3"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"invalid-feedback"]],template:function(n,i){if(n&1&&(o(0,"div",0)(1,"div",1)(2,"h4",2),a(3),r()(),o(4,"div",3)(5,"form",4),c("ngSubmit",function(){return i.guardar()}),o(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),a(10,"Nombre del Plan"),r(),p(11,"input",9),b(12,se,2,0,"div",10)(13,me,2,0,"div",10),r()(),o(14,"div",6)(15,"div",7)(16,"label",8),a(17,"Descripci\xF3n"),r(),p(18,"textarea",11),b(19,ce,2,0,"div",10)(20,de,2,0,"div",10),r()(),o(21,"div",6)(22,"div",7)(23,"label",8),a(24,"Usos Mensuales"),r(),p(25,"input",12),b(26,pe,2,0,"div",10)(27,ue,2,0,"div",10),r()()(),o(28,"div",13)(29,"button",14),a(30),r(),o(31,"button",15),c("click",function(){return i.cancelar()}),a(32," Cancelar "),r()()()()()),n&2){let s,N,_,T,g,h;l(3),q("",i.modoEdicion?"Editar":"Nuevo"," Plan de Salud"),l(2),m("formGroup",i.planForm),l(7),m("ngIf",((s=i.planForm.get("nombre"))==null||s.errors==null?null:s.errors.required)&&((s=i.planForm.get("nombre"))==null?null:s.touched)),l(),m("ngIf",(N=i.planForm.get("nombre"))==null||N.errors==null?null:N.errors.minlength),l(6),m("ngIf",((_=i.planForm.get("descripcion"))==null||_.errors==null?null:_.errors.required)&&((_=i.planForm.get("descripcion"))==null?null:_.touched)),l(),m("ngIf",(T=i.planForm.get("descripcion"))==null||T.errors==null?null:T.errors.minlength),l(6),m("ngIf",((g=i.planForm.get("usosMensuales"))==null||g.errors==null?null:g.errors.required)&&((g=i.planForm.get("usosMensuales"))==null?null:g.touched)),l(),m("ngIf",((h=i.planForm.get("usosMensuales"))==null||h.errors==null?null:h.errors.min)||((h=i.planForm.get("usosMensuales"))==null||h.errors==null?null:h.errors.max)),l(2),m("disabled",!i.planForm.valid),l(),q(" ",i.modoEdicion?"Actualizar":"Crear"," Plan ")}},dependencies:[x,K,U,Q,H,J,W,X],encapsulation:2})}return e})();var ne=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=S({type:e});static \u0275inj=E({imports:[G,Z]})}return e})();var fe=[{path:"apps/planes",children:[{path:"",component:te},{path:"nuevo",component:D},{path:"editar/:id",component:D}]}],je=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=S({type:e});static \u0275inj=E({imports:[V.forChild(fe),ne,V]})}return e})();export{je as planesRoutingModule};
