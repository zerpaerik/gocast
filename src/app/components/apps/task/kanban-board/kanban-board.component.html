<app-page-header title="Kanban Board" title1="Task" activeTitle="Kanban Board"></app-page-header>
<!-- Start:: row-1 -->
<div class="row">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-body p-3">
                <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
                    <div class="d-flex align-items-center flex-wrap gap-2 flex-xxl-nowrap" role="search">
                        <span class="fw-medium fs-15 text-nowrap flex-nowrap me-2">WorkSpace :</span>
                        <input class="form-control me-1" type="search" placeholder="Search Tasks" aria-label="Search">
                        <button class="btn btn-secondary-light" type="submit">Search</button>
                    </div>
                    <div class="ms-auto d-flex gap-4 align-items-center flex-wrap">
                        <div class="avatar-list-stacked">
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/2.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/8.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/2.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/10.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/4.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/13.jpg" alt="img">
                            </span>
                            <a class="avatar avatar-sm bg-primary avatar-rounded text-fixed-white"
                                href="javascript:void(0);">
                                +8
                            </a>
                        </div>
                        <div class="d-flex gap-2 kanban-board flex-wrap">
                            <a class="btn btn-primary btn-w-lg" (click)="open(content)" data-bs-toggle="modal"
                                data-bs-target="#add-board"><i class="ri-add-line me-1 fw-medium align-middle"></i>New
                                Board</a>
                            <div class="flex-fill">
                                <app-spk-ng-select [options]="Project" [id]="'choices-single-default'"
                                    [selectClass]="'creative-nft-select kanban-sortby'" [clearable]="true" [searchable]="true"
                                    [hideSelected]="true" [placeholder]="'Sort By'" [additionalProperties]="{}">
                                </app-spk-ng-select>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End:: row-1 -->

<!-- Start::row-2 -->
<div class="TASK-kanban-board">
    <div class="kanban-tasks-type new">
        <div class="pe-3 mb-3">
            <div
                class="d-flex justify-content-between align-items-center px-3 py-2 bg-primary text-fixed-white rounded">
                <span class="d-block fw-medium fs-15">NEW </span>
                <div>
                    <span class="badge badge-task text-fixed-white">18</span>
                </div>
            </div>
        </div>
        <overlay-scrollbars class="pe-3 mb-3">
            <div class="kanban-tasks" id="new-tasks">
                <div id="new-tasks-draggable" [sortablejs]="normalList1" [sortablejsOptions]="normalOptions"
                    data-view-btn="new-tasks">
                    @for(task of newTasks;track $index){
                        <app-spk-kanbanboard-reusable-card  [taskId]="task.id" [idBg]="task.idBg" [taskTitle]="task.title"
                            [taskDescription]="task.description" [taskPriority]="task.priority" [taskStatus]="task.status"
                            [taskBadges]="task.badges" [likes]="task.likes" [comments]="task.comments" [priorityBg]="task.priorityBg"
                            [avatars]="task.avatars">
                        </app-spk-kanbanboard-reusable-card>
                    }
                    
                </div>
            </div>
        </overlay-scrollbars>
        <div class="d-flex view-more-button mt-3 gap-2 align-items-center" [ngClass]="{'d-none': isHidden}">
            <a href="javascript:void(0);" class="btn btn-primary-light btn-wave flex-fill">View More</a>
            <a aria-label="anchor" class="btn btn-secondary-light border btn-wave flex-fill"
                (click)="openTask(content1)" data-bs-toggle="modal" data-bs-target="#add-task">
                <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
            </a>
        </div>
    </div>
    <div class="kanban-tasks-type todo">
        <div class="pe-3 mb-3">
            <div
                class="d-flex justify-content-between align-items-center px-3 py-2 bg-primary1 text-fixed-white rounded">
                <span class="d-block fw-medium fs-15">TODO </span>
                <div>
                    <span class="badge badge-task text-fixed-white">12</span>
                </div>
            </div>
        </div>
        <overlay-scrollbars class="pe-3 mb-3">
            <div class="kanban-tasks" id="todo-tasks">
                <div id="todo-tasks-draggable" [sortablejs]="normalList2" [sortablejsOptions]="normalOptions1"
                    data-view-btn="todo-tasks">
                    @for(task of todoTasks;track $index){
                        <app-spk-kanbanboard-reusable-card  [taskId]="task.id" [idBg]="task.idBg" [taskTitle]="task.title"
                            [taskDescription]="task.description" [taskPriority]="task.priority" [taskStatus]="task.status"
                            [taskBadges]="task.badges" [likes]="task.likes" [comments]="task.comments" [priorityBg]="task.priorityBg"
                            [avatars]="task.avatars">
                        </app-spk-kanbanboard-reusable-card>
                    }
                   
                </div>
            </div>
        </overlay-scrollbars>
        <div class="d-flex view-more-button mt-3 gap-2 align-items-center" [ngClass]="{'d-none': isHidden}">
            <a href="javascript:void(0);" class="btn btn-primary-light btn-wave flex-fill">View More</a>
            <a aria-label="anchor" class="btn btn-secondary-light border btn-wave flex-fill"
                (click)="openTask(content1)" data-bs-toggle="modal" data-bs-target="#add-task">
                <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
            </a>
        </div>
    </div>
    <div class="kanban-tasks-type in-progress">
        <div class="pe-3 mb-3">
            <div
                class="d-flex justify-content-between align-items-center px-3 py-2 bg-primary2 text-fixed-white rounded">
                <span class="d-block fw-medium fs-15">ON GOING </span>
                <div>
                    <span class="badge badge-task text-fixed-white">26</span>
                </div>
            </div>
        </div>
        <overlay-scrollbars class="pe-3 mb-3">
            <div class="kanban-tasks" id="inprogress-tasks">
                <div id="inprogress-tasks-draggable" [sortablejs]="normalList3" [sortablejsOptions]="normalOptions2"
                    data-view-btn="inprogress-tasks">
                    @for(task of inprogressTasks;track $index){
                        <app-spk-kanbanboard-reusable-card  [taskId]="task.id" [idBg]="task.idBg" [taskTitle]="task.title"
                            [taskDescription]="task.description" [taskPriority]="task.priority" [taskStatus]="task.status"
                            [taskBadges]="task.badges" [likes]="task.likes" [comments]="task.comments" [priorityBg]="task.priorityBg"
                            [avatars]="task.avatars">
                        </app-spk-kanbanboard-reusable-card>
                    }
                 
                </div>
            </div>
        </overlay-scrollbars>
        <div class="d-flex view-more-button mt-3 gap-2 align-items-center" [ngClass]="{'d-none': isHidden}">
            <a href="javascript:void(0);" class="btn btn-primary-light btn-wave flex-fill">View More</a>
            <a aria-label="anchor" class="btn btn-secondary-light border btn-wave flex-fill"
                (click)="openTask(content1)" data-bs-toggle="modal" data-bs-target="#add-task">
                <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
            </a>
        </div>
    </div>
    <div class="kanban-tasks-type inreview">
        <div class="pe-3 mb-3">
            <div
                class="d-flex justify-content-between align-items-center px-3 py-2 bg-primary3 text-fixed-white rounded">
                <span class="d-block fw-medium fs-15">IN REVIEW </span>
                <div>
                    <span class="badge badge-task text-fixed-white">30</span>
                </div>
            </div>
        </div>
        <overlay-scrollbars class="pe-3 mb-3">
            <div class="kanban-tasks" id="inreview-tasks">
                <div id="inreview-tasks-draggable" [sortablejs]="normalList4" [sortablejsOptions]="normalOptions3"
                    data-view-btn="inreview-tasks">
                    <app-spk-kanbanboard-reusable-card  [taskId]="'#SHG - 10'" [idBg]="'bg-primary1-transparent'" [taskTitle]="'Design Architecture Strategy'"
                                [taskDescription]="'Lorem ipsum dolor sit amet, consectetur adipiscing elit.'" [taskPriority]="'Medium'" [taskStatus]="'In Progress'"
                                [taskBadges]="[{type:'bg-primary3-transparent',label:'Review'}]" [likes]="09" [comments]="35" [priorityBg]="'info'"
                                [avatars]="['./assets/images/faces/3.jpg','./assets/images/faces/5.jpg','./assets/images/faces/7.jpg']">
                            </app-spk-kanbanboard-reusable-card>
                 
                </div>
            </div>
        </overlay-scrollbars>
        <div class="d-flex view-more-button mt-3 gap-2 align-items-center" [ngClass]="{'d-none': isHidden}">
            <a href="javascript:void(0);" class="btn btn-primary-light btn-wave flex-fill">View More</a>
            <a aria-label="anchor" class="btn btn-secondary-light border btn-wave flex-fill"
                (click)="openTask(content1)" data-bs-toggle="modal" data-bs-target="#add-task">
                <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
            </a>
        </div>
    </div>
    <div class="kanban-tasks-type completed">
        <div class="pe-3 mb-3">
            <div
                class="d-flex justify-content-between align-items-center px-3 py-2 bg-secondary text-fixed-white rounded">
                <span class="d-block fw-medium fs-15">COMPLETED </span>
                <div>
                    <span class="badge badge-task text-fixed-white">36</span>
                </div>
            </div>
        </div>
        <overlay-scrollbars class="pe-3 mb-3">
            <div class="kanban-tasks" id="completed-tasks">
                <div id="completed-tasks-draggable" [sortablejs]="normalList5" [sortablejsOptions]="normalOptions4"
                    data-view-btn="completed-tasks">
                    @for(task of completedTasks;track $index){
                        <app-spk-kanbanboard-reusable-card  [taskId]="task.id" [idBg]="task.idBg" [taskTitle]="task.title"
                            [taskDescription]="task.description" [taskPriority]="task.priority" [taskStatus]="task.status"
                            [taskBadges]="task.badges" [likes]="task.likes" [comments]="task.comments" [priorityBg]="task.priorityBg"
                            [avatars]="task.avatars">
                        </app-spk-kanbanboard-reusable-card>
                    }
                </div>
            </div>
        </overlay-scrollbars>
        <div class="d-flex view-more-button mt-3 gap-2 align-items-center" [ngClass]="{'d-none': isHidden}">
            <a href="javascript:void(0);" class="btn btn-primary-light btn-wave flex-fill">View More</a>
            <a aria-label="anchor" class="btn btn-secondary-light border btn-wave flex-fill"
                (click)="openTask(content1)" data-bs-toggle="modal" data-bs-target="#add-task">
                <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
            </a>
        </div>
    </div>
</div>
<!--End::row-2 -->

<!-- Start::add board modal -->

<ng-template #content let-modal>
    <div class="modal-header">
        <h6 class="modal-title">Add Board</h6>
        <button type="button" (click)="modal.close('cross click')" class="btn-close" data-bs-dismiss="modal"
            id="content"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-xl-12">
                <label for="board-title" class="form-label">Task Board Title</label>
                <input type="text" class="form-control" id="board-title" placeholder="Board Title">
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.dismiss('Ok click')">Cancel</button>
        <button type="button" class="btn btn-primary">Add Board</button>
    </div>
</ng-template>

<!-- End::add board modal -->

<!-- Start::add task modal -->

<ng-template #content1 let-modal>
    <div class="modal-header">
        <h6 class="modal-title">Add Task</h6>
        <button type="button" (click)="modal.close('cross click')" class="btn-close" data-bs-dismiss="modal"
            aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <div class="row gy-2">
            <div class="col-xl-6">
                <label for="task-name" class="form-label">Task Name</label>
                <input type="text" class="form-control" id="task-name" placeholder="Task Name">
            </div>
            <div class="col-xl-6">
                <label for="task-id" class="form-label">Task ID</label>
                <input type="text" class="form-control" id="task-id" placeholder="Task ID">
            </div>
            <div class="col-xl-12">
                <label for="text-area" class="form-label">Task Description</label>
                <textarea class="form-control" id="text-area" rows="2" placeholder="Write Description"></textarea>
            </div>
            <div class="col-xl-12">
                <label for="text-area" class="form-label">Task Images</label>
                <file-pond multiple class="product-documents" data-allow-reorder="true" data-max-file-size="3MB"
                    data-max-files="6" [options]="pondOptions" [files]="pondFiles" (oninit)="pondHandleInit()"
                    (onaddfile)="pondHandleAddFile($event)" (onactivatefile)="pondHandleActivateFile($event)">
                </file-pond>
            </div>
            <div class="col-xl-12">
                <label class="form-label">Assigned To</label>
                <app-spk-ng-select [options]="Assigned" [defaultValue]="selected" [id]="'choices-single-default'"
                    [selectClass]="''" [multiple]="true" [clearable]="true" [searchable]="true" [hideSelected]="true"
                    [additionalProperties]="{}">
                </app-spk-ng-select>

            </div>
            <div class="col-xl-6">
                <label class="form-label">Target Date</label>
                <div class="form-group">
                    <div class="input-group">
                        <div class="input-group-text text-muted"> <i class="ri-calendar-line"></i> </div>
                        <app-spk-flatpickr placeholder="Choose Date With Time" class="form-control"
                        [mode]="'single'" [altInput]="false" [convertModelValue]="true" [enableTime]="true"
                        [dateFormat]="'Y-m-d H:i'"></app-spk-flatpickr>
                    </div>
                </div>
            </div>
            <div class="col-xl-6">
                <label class="form-label">Tags</label>
                <app-spk-ng-select [options]="Tags" [id]="'choices-multiple-remove-button2'" [selectClass]="''"
                    [multiple]="true" [clearable]="true" [searchable]="true" [hideSelected]="true"
                    [placeholder]="'Select Tag'" [additionalProperties]="{}">
                </app-spk-ng-select>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn m-0 me-2 btn-primary1-light" (click)="modal.close('cross click')"
            data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn m-0 btn-primary">Add Task</button>
    </div>
</ng-template>

<!-- End::add task modal -->