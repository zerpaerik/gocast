<div class="card">
    <div class="card-header">
      <h4 class="card-title">{{ modoEdicion ? 'Editar' : 'Nuevo' }} Plan de Salud</h4>
    </div>
    <div class="card-body">
      <form [formGroup]="planForm" (ngSubmit)="guardar()">
        <div class="row">
          <div class="col-md-4">
            <div class="form-group mb-3">
              <label class="form-label">Nombre del Plan</label>
              <input type="text" class="form-control" formControlName="nombre"
                     placeholder="Ingrese el nombre del plan">
              <div class="invalid-feedback" *ngIf="planForm.get('nombre')?.errors?.['required'] && planForm.get('nombre')?.touched">
                El nombre es requerido
              </div>
              <div class="invalid-feedback" *ngIf="planForm.get('nombre')?.errors?.['minlength']">
                El nombre debe tener al menos 3 caracteres
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group mb-3">
              <label class="form-label">Descripción</label>
              <textarea class="form-control" formControlName="descripcion"
                        placeholder="Ingrese la descripción del plan" rows="2"></textarea>
              <div class="invalid-feedback" *ngIf="planForm.get('descripcion')?.errors?.['required'] && planForm.get('descripcion')?.touched">
                La descripción es requerida
              </div>
              <div class="invalid-feedback" *ngIf="planForm.get('descripcion')?.errors?.['minlength']">
                La descripción debe tener al menos 10 caracteres
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group mb-3">
              <label class="form-label">Usos Mensuales</label>
              <input type="number" class="form-control" formControlName="usosMensuales"
                     placeholder="Cantidad máxima de usos por mes">
              <div class="invalid-feedback" *ngIf="planForm.get('usosMensuales')?.errors?.['required'] && planForm.get('usosMensuales')?.touched">
                Los usos mensuales son requeridos
              </div>
              <div class="invalid-feedback" *ngIf="planForm.get('usosMensuales')?.errors?.['min'] || planForm.get('usosMensuales')?.errors?.['max']">
                Los usos mensuales deben estar entre 1 y 31
              </div>
            </div>
          </div>
        </div>
        <div class="mt-3">
          <button type="submit" class="btn btn-primary me-2" [disabled]="!planForm.valid">
            {{ modoEdicion ? 'Actualizar' : 'Crear' }} Plan
          </button>
          <button type="button" class="btn btn-secondary" (click)="cancelar()">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>