import{a as H}from"./chunk-AC7NVW55.js";import{y as Q,z as q}from"./chunk-66MCY2UZ.js";import"./chunk-LWEV5N6L.js";import{o as x}from"./chunk-6SH7557L.js";import{$c as O,Ba as I,Bc as V,Ca as k,Cc as w,Dc as z,Hc as o,Ic as R,Jc as s,Ma as h,Na as b,Oc as T,Pc as D,Qb as m,Qd as U,Rd as N,Vb as p,Wc as L,Xb as y,Xc as F,Yd as j,ce as G,hc as n,ic as t,jc as v,nc as A,q as g,qa as E,ra as C,tc as S,vc as u,yb as a,zb as _}from"./chunk-XJ56SYHS.js";import"./chunk-DW7GCGLI.js";import{a as M,h as J}from"./chunk-BI7C37SH.js";var f=(()=>{class i{proveedores=[{id:1,nombre:"Juan P\xE9rez",telefono:"+58 414-555-1234",tipoVehiculo:"Gr\xFAa Plataforma",lat:10.491016,lng:-66.902061,estado:"activo",iconOptions:{iconUrl:"assets/images/marker-green.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]},serviciosActivos:[{id:1,numeroServicio:"SRV-001",tipoServicio:"Remolque",cliente:{nombre:"Mar\xEDa Gonz\xE1lez",telefono:"+58 424-555-9876",ubicacion:"Av. Francisco de Miranda, Los Palos Grandes, Caracas"},fechaInicio:new Date,estado:"En Proceso"},{id:2,numeroServicio:"SRV-002",tipoServicio:"Asistencia Mec\xE1nica",cliente:{nombre:"Luis Rodr\xEDguez",telefono:"+58 412-555-4567",ubicacion:"Centro Comercial Sambil, Chacao, Caracas"},fechaInicio:new Date,estado:"Pendiente"}]},{id:2,nombre:"Carlos Rodr\xEDguez",telefono:"+58 412-555-5678",tipoVehiculo:"Gr\xFAa de Arrastre",lat:10.506098,lng:-66.915492,estado:"activo",iconOptions:{iconUrl:"assets/images/marker-green.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]},serviciosActivos:[{id:3,numeroServicio:"SRV-003",tipoServicio:"Asistencia Mec\xE1nica",cliente:{nombre:"Pedro Mart\xEDnez",telefono:"+58 416-555-4321",ubicacion:"Las Mercedes, Torre Empresarial, Caracas"},fechaInicio:new Date,estado:"En Ruta"}]},{id:3,nombre:"Ana Torres",telefono:"+58 424-555-9012",tipoVehiculo:"Unidad Mec\xE1nica",lat:10.491433,lng:-66.884121,estado:"disponible",iconOptions:{iconUrl:"assets/images/marker-blue.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}},{id:4,nombre:"Luis Ram\xEDrez",telefono:"+58 414-555-3456",tipoVehiculo:"Gr\xFAa Plataforma",lat:10.469857,lng:-66.893133,estado:"activo",iconOptions:{iconUrl:"assets/images/marker-green.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]},serviciosActivos:[{id:4,numeroServicio:"SRV-004",tipoServicio:"Remolque",cliente:{nombre:"Carmen D\xEDaz",telefono:"+58 412-555-8765",ubicacion:"El Rosal, Centro Plaza, Caracas"},fechaInicio:new Date,estado:"En Proceso"},{id:5,numeroServicio:"SRV-005",tipoServicio:"Bater\xEDa Descargada",cliente:{nombre:"Jos\xE9 Blanco",telefono:"+58 416-555-9999",ubicacion:"La Castellana, Edificio Torre La Primera, Caracas"},fechaInicio:new Date,estado:"Pendiente"}]},{id:5,nombre:"Mar\xEDa Fern\xE1ndez",telefono:"+58 416-555-7890",tipoVehiculo:"Unidad Mec\xE1nica",lat:10.506098,lng:-66.893133,estado:"disponible",iconOptions:{iconUrl:"assets/images/marker-blue.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}},{id:6,nombre:"Roberto Mendoza",telefono:"+58 424-555-2468",tipoVehiculo:"Gr\xFAa Plataforma",lat:10.495678,lng:-66.899876,estado:"activo",iconOptions:{iconUrl:"assets/images/marker-green.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]},serviciosActivos:[{id:6,numeroServicio:"SRV-006",tipoServicio:"Cambio de Cauchos",cliente:{nombre:"Diana L\xF3pez",telefono:"+58 414-555-1357",ubicacion:"Altamira, Centro Comercial San Ignacio, Caracas"},fechaInicio:new Date,estado:"En Proceso"}]}];getProveedores(){return g(this.proveedores)}getProveedor(e){return g(this.proveedores.find(r=>r.id===e))}static \u0275fac=function(r){return new(r||i)};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var d=J(H());var W=["proveedorModal"];function X(i,l){if(i&1&&(n(0,"div",18)(1,"div",4)(2,"div",6)(3,"h6",19),o(4),t(),n(5,"p",20)(6,"strong"),o(7,"Tipo:"),t(),o(8),t(),n(9,"p",20)(10,"strong"),o(11,"Cliente:"),t(),o(12),t(),n(13,"p",20)(14,"strong"),o(15,"Tel\xE9fono Cliente:"),t(),o(16),t(),n(17,"p",20)(18,"strong"),o(19,"Ubicaci\xF3n:"),t(),o(20),t(),n(21,"p",21)(22,"strong"),o(23,"Estado:"),t(),o(24),t()()()()),i&2){let e=l.$implicit;a(4),R(e.numeroServicio),a(4),s(" ",e.tipoServicio,""),a(4),s(" ",e.cliente.nombre,""),a(4),s(" ",e.cliente.telefono,""),a(4),s(" ",e.cliente.ubicacion,""),a(4),s(" ",e.estado,"")}}function Y(i,l){if(i&1&&(n(0,"div",15)(1,"h6"),o(2,"Servicios Activos"),t(),m(3,X,25,6,"div",17),t()),i&2){let e=u(3);a(3),p("ngForOf",e.selectedProveedor.serviciosActivos)}}function Z(i,l){i&1&&(n(0,"div",15)(1,"div",22),v(2,"i",23),o(3," Este proveedor est\xE1 disponible para asignar servicios. "),t(),n(4,"button",24),v(5,"i",25),o(6," Asignar Servicio "),t()())}function ee(i,l){if(i&1&&(n(0,"div",14)(1,"div",2)(2,"div",15)(3,"h6"),o(4,"Datos del Proveedor"),t(),n(5,"p")(6,"strong"),o(7,"Nombre:"),t(),o(8),t(),n(9,"p")(10,"strong"),o(11,"Tel\xE9fono:"),t(),o(12),t(),n(13,"p")(14,"strong"),o(15,"Tipo de Veh\xEDculo:"),t(),o(16),t(),n(17,"p")(18,"strong"),o(19,"Estado:"),t(),n(20,"span"),o(21),L(22,"titlecase"),t()()(),m(23,Y,4,1,"div",16)(24,Z,7,0,"div",16),t()()),i&2){let e=u(2);a(8),s(" ",e.selectedProveedor.nombre,""),a(4),s(" ",e.selectedProveedor.telefono,""),a(4),s(" ",e.selectedProveedor.tipoVehiculo,""),a(4),y("text-success",e.selectedProveedor.estado==="activo")("text-primary",e.selectedProveedor.estado==="disponible"),a(),s(" ",F(22,10,e.selectedProveedor.estado)," "),a(2),p("ngIf",e.selectedProveedor.estado==="activo"),a(),p("ngIf",e.selectedProveedor.estado==="disponible")}}function te(i,l){if(i&1){let e=A();n(0,"div",8)(1,"h5",9),o(2,"Informaci\xF3n del Proveedor"),t(),n(3,"button",10),S("click",function(){let c=h(e).$implicit;return b(c.dismiss())}),t()(),m(4,ee,25,12,"div",11),n(5,"div",12)(6,"button",13),S("click",function(){let c=h(e).$implicit;return b(c.close())}),o(7,"Cerrar"),t()()}if(i&2){let e=u();a(4),p("ngIf",e.selectedProveedor)}}var $=(()=>{class i{mapProveedoresService;modalService;proveedorModal;map;markers=[];proveedores=[];selectedProveedor;center=[10.491016,-66.902061];constructor(e,r){this.mapProveedoresService=e,this.modalService=r}ngOnInit(){this.loadProveedores()}ngAfterViewInit(){this.map||this.initMap()}ngOnDestroy(){this.map&&(this.map.remove(),this.map=void 0)}initMap(){let e=d.DomUtil.get("map");e!=null&&(e._leaflet_id=null),this.map=d.map("map").setView(this.center,13),d.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(this.map),this.proveedores.length>0&&this.addMarkers()}loadProveedores(){this.mapProveedoresService.getProveedores().subscribe(e=>{this.proveedores=e,this.map&&this.addMarkers()})}addMarkers(){this.map&&(this.markers.forEach(e=>e.remove()),this.markers=[],this.proveedores.forEach(e=>{let r=d.icon(M({},e.iconOptions)),c=d.marker([e.lat,e.lng],{icon:r});c.on("click",()=>{this.onMarkerClick(e)}),c.addTo(this.map),this.markers.push(c)}))}onMarkerClick(e){this.selectedProveedor=e,this.modalService.open(this.proveedorModal,{size:"lg",backdrop:"static",keyboard:!1})}static \u0275fac=function(r){return new(r||i)(_(f),_(Q))};static \u0275cmp=I({type:i,selectors:[["app-map-proveedores"]],viewQuery:function(r,c){if(r&1&&V(W,5),r&2){let P;w(P=z())&&(c.proveedorModal=P.first)}},standalone:!0,features:[T([f]),D],decls:11,vars:0,consts:[["proveedorModal",""],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-body"],["id","map",2,"height","600px","width","100%"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"modal-body"],[1,"col-md-6"],["class","col-md-6",4,"ngIf"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"card-title"],[1,"mb-1"],[1,"mb-0"],[1,"alert","alert-info"],[1,"ti","ti-info-circle","me-2"],[1,"btn","btn-primary"],[1,"ti","ti-plus","me-1"]],template:function(r,c){r&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5"),o(6,"Mapa de Proveedores"),t()(),n(7,"div",6),v(8,"div",7),t()()()()(),m(9,te,8,1,"ng-template",null,0,O))},dependencies:[G,U,N,j,q],encapsulation:2})}return i})();var ie=[{path:"",component:$,data:{title:"Mapa de Proveedores",breadcrumb:"Mapa de Proveedores"}}],ve=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=k({type:i});static \u0275inj=C({imports:[x.forChild(ie),x]})}return i})();export{ve as MapProveedoresRoutingModule,ie as routes};
