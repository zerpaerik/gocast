import{a as B,b as $,c as K}from"./chunk-RFSOAQPL.js";import{a as L}from"./chunk-O4YKPJIE.js";import{A as D,B as z,C as R,c as x,e as c,g as N,h as M,n as O,o as j,r as q,t as V,u as A,v as k,x as G,y as w}from"./chunk-LWEV5N6L.js";import{i as I,k as y}from"./chunk-6SH7557L.js";import{Ba as S,Hc as n,Jc as f,Pc as _,Qb as p,Qd as E,Rd as b,Vb as m,ce as F,hc as r,ic as o,jc as C,tc as v,vc as h,yb as a,zb as d}from"./chunk-XJ56SYHS.js";import"./chunk-DW7GCGLI.js";import{a as g,b as T,h as J}from"./chunk-BI7C37SH.js";var H=J(L());function P(i,s){if(i&1&&(r(0,"option",22),n(1),o()),i&2){let t=s.$implicit;m("value",t),a(),f(" ",t," ")}}function Q(i,s){i&1&&(r(0,"div",23)(1,"small"),n(2,"El tipo de servicio es requerido"),o()())}function U(i,s){if(i&1&&(r(0,"option",22),n(1),o()),i&2){let t=s.$implicit;m("value",t),a(),f(" ",t," ")}}function W(i,s){i&1&&(r(0,"div",23)(1,"small"),n(2,"El tipo de tarifa es requerido"),o()())}function X(i,s){i&1&&(r(0,"small"),n(1,"El monto es requerido"),o())}function Y(i,s){i&1&&(r(0,"small"),n(1,"El monto debe ser mayor a 0"),o())}function Z(i,s){if(i&1&&(r(0,"div",23),p(1,X,2,0,"small",24)(2,Y,2,0,"small",24),o()),i&2){let t=h();a(),m("ngIf",t.montoControl==null||t.montoControl.errors==null?null:t.montoControl.errors.required),a(),m("ngIf",t.montoControl==null||t.montoControl.errors==null?null:t.montoControl.errors.min)}}var mt=(()=>{class i{fb;tarifasService;router;route;form;isEditing=!1;tarifaId;tiposServicio=Object.values(B);tiposTarifa=Object.values($);constructor(t,l,e,u){this.fb=t,this.tarifasService=l,this.router=e,this.route=u,this.form=this.fb.group({tipoServicio:["",c.required],tipoTarifa:["",c.required],monto:["",[c.required,c.min(0)]]})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditing=!0,this.tarifaId=+t,this.cargarTarifa(this.tarifaId))}cargarTarifa(t){this.tarifasService.getTarifa(t).subscribe(l=>{l?this.form.patchValue(l):this.router.navigate(["/apps/tarifas"])})}guardar(){if(this.form.valid){let t=this.form.value;this.isEditing&&this.tarifaId?this.tarifasService.actualizarTarifa(T(g({},t),{id:this.tarifaId})).subscribe(()=>{this.mostrarMensajeExito("Tarifa actualizada exitosamente")}):this.tarifasService.crearTarifa(t).subscribe(()=>{this.mostrarMensajeExito("Tarifa creada exitosamente")})}else Object.keys(this.form.controls).forEach(t=>{let l=this.form.get(t);l?.invalid&&l.markAsTouched()})}mostrarMensajeExito(t){H.default.fire({title:"\xA1\xC9xito!",text:t,icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/apps/tarifas"])})}cancelar(){this.router.navigate(["/apps/tarifas"])}get montoControl(){return this.form.get("monto")}get tipoServicioControl(){return this.form.get("tipoServicio")}get tipoTarifaControl(){return this.form.get("tipoTarifa")}static \u0275fac=function(l){return new(l||i)(d(D),d(K),d(y),d(I))};static \u0275cmp=S({type:i,selectors:[["app-tarifas-form"]],standalone:!0,features:[_],decls:40,vars:9,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"col-md-4"],[1,"form-group"],["for","tipoServicio"],["id","tipoServicio","formControlName","tipoServicio",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["for","tipoTarifa"],["id","tipoTarifa","formControlName","tipoTarifa",1,"form-control"],["for","monto"],["type","number","id","monto","formControlName","monto","placeholder","Ingrese el monto","step","0.01","min","0",1,"form-control"],[1,"row","mt-3"],[1,"col-12","text-right"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],[3,"value"],[1,"text-danger"],[4,"ngIf"]],template:function(l,e){l&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5"),n(6),o()(),r(7,"div",5)(8,"form",6),v("ngSubmit",function(){return e.guardar()}),r(9,"div",1)(10,"div",7)(11,"div",8)(12,"label",9),n(13,"Tipo de Servicio"),o(),r(14,"select",10)(15,"option",11),n(16,"Seleccione un servicio"),o(),p(17,P,2,2,"option",12),o(),p(18,Q,3,0,"div",13),o()(),r(19,"div",7)(20,"div",8)(21,"label",14),n(22,"Tipo de Tarifa"),o(),r(23,"select",15)(24,"option",11),n(25,"Seleccione un tipo de tarifa"),o(),p(26,U,2,2,"option",12),o(),p(27,W,3,0,"div",13),o()(),r(28,"div",7)(29,"div",8)(30,"label",16),n(31,"Monto"),o(),C(32,"input",17),p(33,Z,3,2,"div",13),o()()(),r(34,"div",18)(35,"div",19)(36,"button",20),v("click",function(){return e.cancelar()}),n(37," Cancelar "),o(),r(38,"button",21),n(39),o()()()()()()()()()),l&2&&(a(6),f("",e.isEditing?"Editar":"Nueva"," Tarifa"),a(2),m("formGroup",e.form),a(9),m("ngForOf",e.tiposServicio),a(),m("ngIf",(e.tipoServicioControl==null?null:e.tipoServicioControl.touched)&&(e.tipoServicioControl==null?null:e.tipoServicioControl.invalid)),a(8),m("ngForOf",e.tiposTarifa),a(),m("ngIf",(e.tipoTarifaControl==null?null:e.tipoTarifaControl.touched)&&(e.tipoTarifaControl==null?null:e.tipoTarifaControl.invalid)),a(6),m("ngIf",(e.montoControl==null?null:e.montoControl.touched)&&(e.montoControl==null?null:e.montoControl.invalid)),a(5),m("disabled",e.form.invalid),a(),f(" ",e.isEditing?"Actualizar":"Guardar"," "))},dependencies:[F,E,b,z,O,k,G,x,j,A,N,M,w,R,q,V],encapsulation:2})}return i})();export{mt as TarifasFormComponent};
