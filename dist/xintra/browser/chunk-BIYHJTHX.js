import{F as ge,e as ae,j as le,l as de,n as ce,o as se,p as pe,q as ve,r as ue,t as fe}from"./chunk-WQX7T2D7.js";import{b as me}from"./chunk-U3XZZ2WL.js";import"./chunk-LZABV6DF.js";import"./chunk-ZLHV26W2.js";import"./chunk-IO2JD2WI.js";import"./chunk-NCYFWSDI.js";import"./chunk-2MEGTBP5.js";import"./chunk-HX3ESI56.js";import{A as re,C as ne,c as H,e as s,g as J,h as X,n as K,o as U,r as W,s as Y,t as Z,u as ee,v as te,w as ie,x as oe}from"./chunk-LWEV5N6L.js";import{i as $,k as F,o as N}from"./chunk-6SH7557L.js";import{$c as L,Ba as x,Bc as k,Ca as _,Cc as B,Dc as q,Hc as o,Ic as b,Jc as V,Kc as I,Ma as u,Na as f,Qb as E,Qd as O,Rd as z,Vb as v,ce as Q,g as A,hc as i,ic as e,jc as l,nc as C,q as D,qa as R,ra as S,tc as c,vc as g,yb as m,zb as p}from"./chunk-XJ56SYHS.js";import"./chunk-DW7GCGLI.js";import{a as T,b as j}from"./chunk-BI7C37SH.js";var P=(()=>{class n{proveedores=[{id:1,nombre:"Juan",apellido:"P\xE9rez",cedula:"V-12345678",telefono:"0414-1234567",rif:"J-12345678-9",tipoServicio:"Grua",servicioGrua:{tipo:"Plataforma",modelo:"2020",marca:"Ford",capacidad:"3 toneladas",servicios:["Remolque","Traslado","Rescate"]}},{id:2,nombre:"Mar\xEDa",apellido:"Gonz\xE1lez",cedula:"V-87654321",telefono:"0424-7654321",rif:"V-87654321-0",tipoServicio:"Moto",servicioMoto:{tipo:"Motocicleta de servicio",marca:"Honda",modelo:"XR250",servicios:["Gasolina","Cerrajer\xEDa"]}},{id:3,nombre:"Carlos",apellido:"Rodr\xEDguez",cedula:"V-98765432",telefono:"0412-9876543",rif:"V-98765432-1",tipoServicio:"Bateria",servicioBateria:{tipoVehiculo:"Camioneta",marca:"Toyota",modelo:"Hilux",color:"Blanco",a\u00F1o:2022}}];proveedoresSubject=new A(this.proveedores);getProveedores(){return this.proveedoresSubject.asObservable()}getProveedorById(t){return D(this.proveedores.find(r=>r.id===t))}agregarProveedor(t){let r=Math.max(...this.proveedores.map(d=>d.id||0))+1,a=j(T({},t),{id:r});this.proveedores=[...this.proveedores,a],this.proveedoresSubject.next(this.proveedores)}actualizarProveedor(t){this.proveedores=this.proveedores.map(r=>r.id===t.id?t:r),this.proveedoresSubject.next(this.proveedores)}eliminarProveedor(t){this.proveedores=this.proveedores.filter(r=>r.id!==t),this.proveedoresSubject.next(this.proveedores)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _e=["confirmDialog"];function Ce(n,h){if(n&1){let t=C();i(0,"tr")(1,"td"),o(2),e(),i(3,"td"),o(4),e(),i(5,"td"),o(6),e(),i(7,"td"),o(8),e(),i(9,"td"),o(10),e(),i(11,"td")(12,"button",14),c("click",function(){let a=u(t).$implicit,d=g();return f(d.editarProveedor(a.id))}),l(13,"i",15),o(14," Editar "),e(),i(15,"button",16),c("click",function(){let a=u(t).$implicit,d=g();return f(d.confirmarEliminar(a))}),l(16,"i",17),o(17," Eliminar "),e()()()}if(n&2){let t=h.$implicit;m(2),I("",t.nombre," ",t.apellido,""),m(2),b(t.cedula),m(2),b(t.telefono),m(2),b(t.rif),m(2),b(t.tipoServicio)}}function Fe(n,h){if(n&1){let t=C();i(0,"div",18)(1,"h4",19),o(2,"Confirmar Eliminaci\xF3n"),e(),i(3,"p"),o(4),e()(),i(5,"div",20)(6,"button",21),c("click",function(){u(t);let a=g();return f(a.cerrarDialog())}),o(7,"Cancelar"),e(),i(8,"button",22),c("click",function(){u(t);let a=g();return f(a.eliminarProveedor())}),o(9,"Eliminar"),e()()}if(n&2){let t=g();m(4),I("\xBFEst\xE1 seguro que desea eliminar al proveedor ",t.proveedorAEliminar==null?null:t.proveedorAEliminar.nombre," ",t.proveedorAEliminar==null?null:t.proveedorAEliminar.apellido,"?")}}var Ee=(()=>{class n{proveedorService;router;dialog;proveedores=[];proveedorAEliminar=null;confirmDialog;dialogRef=null;constructor(t,r,a){this.proveedorService=t,this.router=r,this.dialog=a}ngOnInit(){this.cargarProveedores()}cargarProveedores(){this.proveedorService.getProveedores().subscribe(t=>this.proveedores=t)}nuevoProveedor(){this.router.navigate(["/proveedores/nuevo"])}editarProveedor(t){t&&this.router.navigate(["/proveedores/editar",t])}confirmarEliminar(t){this.proveedorAEliminar=t,this.dialogRef=this.dialog.open(this.confirmDialog,{width:"400px"})}cerrarDialog(){this.dialogRef&&this.dialogRef.close()}eliminarProveedor(){this.proveedorAEliminar?.id&&(this.proveedorService.eliminarProveedor(this.proveedorAEliminar.id),this.cerrarDialog(),this.proveedorAEliminar=null)}static \u0275fac=function(r){return new(r||n)(p(P),p(F),p(se))};static \u0275cmp=x({type:n,selectors:[["app-lista-proveedores"]],viewQuery:function(r,a){if(r&1&&k(_e,5),r&2){let d;B(d=q())&&(a.confirmDialog=d.first)}},decls:34,vars:1,consts:[["confirmDialog",""],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col"],[1,"col","text-end"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],["mat-dialog-content",""],[1,"modal-title"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(r,a){if(r&1){let d=C();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",2)(6,"div",6)(7,"h5"),o(8,"Listado de Proveedores"),e()(),i(9,"div",7)(10,"button",8),c("click",function(){return u(d),f(a.nuevoProveedor())}),l(11,"i",9),o(12," Nuevo Proveedor "),e()()()(),i(13,"div",10)(14,"div",11)(15,"table",12)(16,"thead")(17,"tr")(18,"th"),o(19,"Nombre"),e(),i(20,"th"),o(21,"C\xE9dula"),e(),i(22,"th"),o(23,"Tel\xE9fono"),e(),i(24,"th"),o(25,"RIF"),e(),i(26,"th"),o(27,"Tipo de Servicio"),e(),i(28,"th"),o(29,"Acciones"),e()()(),i(30,"tbody"),E(31,Ce,18,6,"tr",13),e()()()()()()()(),E(32,Fe,10,2,"ng-template",null,0,L)}r&2&&(m(31),v("ngForOf",a.proveedores))},dependencies:[O,ve,pe,le],encapsulation:2})}return n})();function Me(n,h){n&1&&(i(0,"div",28)(1,"h6",29),o(2,"Informaci\xF3n de la Gr\xFAa"),e(),i(3,"div",7)(4,"div",30)(5,"div",9)(6,"label"),o(7,"Tipo"),e(),l(8,"input",31),e()(),i(9,"div",30)(10,"div",9)(11,"label"),o(12,"Modelo"),e(),l(13,"input",32),e()(),i(14,"div",30)(15,"div",9)(16,"label"),o(17,"Marca"),e(),l(18,"input",33),e()(),i(19,"div",30)(20,"div",9)(21,"label"),o(22,"Capacidad"),e(),l(23,"input",34),e()()(),i(24,"div",7)(25,"div",35)(26,"div",9)(27,"label"),o(28,"Servicios"),e(),i(29,"select",36)(30,"option",37),o(31,"Remolque"),e(),i(32,"option",38),o(33,"Traslado"),e(),i(34,"option",39),o(35,"Rescate"),e()()()()()())}function Pe(n,h){n&1&&(i(0,"div",40)(1,"h6",29),o(2,"Informaci\xF3n de la Moto"),e(),i(3,"div",7)(4,"div",12)(5,"div",9)(6,"label"),o(7,"Tipo"),e(),l(8,"input",31),e()(),i(9,"div",12)(10,"div",9)(11,"label"),o(12,"Marca"),e(),l(13,"input",33),e()(),i(14,"div",12)(15,"div",9)(16,"label"),o(17,"Modelo"),e(),l(18,"input",32),e()()(),i(19,"div",7)(20,"div",35)(21,"div",9)(22,"label"),o(23,"Servicios"),e(),i(24,"select",36)(25,"option",41),o(26,"Gasolina"),e(),i(27,"option",42),o(28,"Cerrajer\xEDa"),e()()()()()())}function ye(n,h){n&1&&(i(0,"div",43)(1,"h6",29),o(2,"Informaci\xF3n del Veh\xEDculo"),e(),i(3,"div",7)(4,"div",12)(5,"div",9)(6,"label"),o(7,"Tipo de Veh\xEDculo"),e(),l(8,"input",44),e()(),i(9,"div",12)(10,"div",9)(11,"label"),o(12,"Marca"),e(),l(13,"input",33),e()(),i(14,"div",12)(15,"div",9)(16,"label"),o(17,"Modelo"),e(),l(18,"input",32),e()()(),i(19,"div",7)(20,"div",8)(21,"div",9)(22,"label"),o(23,"Color"),e(),l(24,"input",45),e()(),i(25,"div",8)(26,"div",9)(27,"label"),o(28,"A\xF1o"),e(),l(29,"input",46),e()()()())}var G=(()=>{class n{fb;proveedorService;router;route;proveedorForm;modoEdicion=!1;proveedorId=null;constructor(t,r,a,d){this.fb=t,this.proveedorService=r,this.router=a,this.route=d,this.proveedorForm=this.crearFormulario()}ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.modoEdicion=!0,this.proveedorId=+t.id,this.cargarProveedor(this.proveedorId))})}crearFormulario(){return this.fb.group({nombre:["",s.required],apellido:["",s.required],cedula:["",s.required],telefono:["",s.required],rif:["",s.required],tipoServicio:["",s.required],servicioGrua:this.fb.group({tipo:[""],modelo:[""],marca:[""],capacidad:[""],servicios:[[]]}),servicioMoto:this.fb.group({tipo:[""],marca:[""],modelo:[""],servicios:[[]]}),servicioBateria:this.fb.group({tipoVehiculo:[""],marca:[""],modelo:[""],color:[""],a\u00F1o:[null]})})}cargarProveedor(t){this.proveedorService.getProveedorById(t).subscribe(r=>{r&&this.proveedorForm.patchValue(r)})}onTipoServicioChange(){let t=this.proveedorForm.get("tipoServicio")?.value;switch(this.proveedorForm.get("servicioGrua")?.reset(),this.proveedorForm.get("servicioMoto")?.reset(),this.proveedorForm.get("servicioBateria")?.reset(),t){case"Grua":this.agregarValidadoresGrua();break;case"Moto":this.agregarValidadoresMoto();break;case"Bateria":this.agregarValidadoresBateria();break}}agregarValidadoresGrua(){let t=this.proveedorForm.get("servicioGrua");t&&Object.keys(t.controls).forEach(r=>{t.get(r)?.setValidators(s.required),t.get(r)?.updateValueAndValidity()})}agregarValidadoresMoto(){let t=this.proveedorForm.get("servicioMoto");t&&Object.keys(t.controls).forEach(r=>{t.get(r)?.setValidators(s.required),t.get(r)?.updateValueAndValidity()})}agregarValidadoresBateria(){let t=this.proveedorForm.get("servicioBateria");t&&Object.keys(t.controls).forEach(r=>{t.get(r)?.setValidators(s.required),t.get(r)?.updateValueAndValidity()})}onSubmit(){if(this.proveedorForm.valid){let t=this.proveedorForm.value;this.modoEdicion&&this.proveedorId?(t.id=this.proveedorId,this.proveedorService.actualizarProveedor(t)):this.proveedorService.agregarProveedor(t),this.router.navigate(["/proveedores"])}}cancelar(){this.router.navigate(["/proveedores"])}static \u0275fac=function(r){return new(r||n)(p(re),p(P),p(F),p($))};static \u0275cmp=x({type:n,selectors:[["app-formulario-proveedor"]],decls:59,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],[1,"form-group"],["type","text","formControlName","nombre",1,"form-control"],["type","text","formControlName","apellido",1,"form-control"],[1,"col-md-4"],["type","text","formControlName","cedula",1,"form-control"],["type","text","formControlName","telefono",1,"form-control"],["type","text","formControlName","rif",1,"form-control"],["formControlName","tipoServicio",1,"form-control",3,"change"],["value",""],["value","Grua"],["value","Moto"],["value","Bateria"],["formGroupName","servicioGrua",4,"ngIf"],["formGroupName","servicioMoto",4,"ngIf"],["formGroupName","servicioBateria",4,"ngIf"],[1,"row","mt-4"],[1,"col-12"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],["formGroupName","servicioGrua"],[1,"mb-3"],[1,"col-md-3"],["type","text","formControlName","tipo",1,"form-control"],["type","text","formControlName","modelo",1,"form-control"],["type","text","formControlName","marca",1,"form-control"],["type","text","formControlName","capacidad",1,"form-control"],[1,"col-md-12"],["multiple","","formControlName","servicios",1,"form-control"],["value","Remolque"],["value","Traslado"],["value","Rescate"],["formGroupName","servicioMoto"],["value","Gasolina"],["value","Cerrajer\xEDa"],["formGroupName","servicioBateria"],["type","text","formControlName","tipoVehiculo",1,"form-control"],["type","text","formControlName","color",1,"form-control"],["type","number","formControlName","a\xF1o",1,"form-control"]],template:function(r,a){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5"),o(6),e()(),i(7,"div",5)(8,"form",6),c("ngSubmit",function(){return a.onSubmit()}),i(9,"div",7)(10,"div",8)(11,"div",9)(12,"label"),o(13,"Nombre"),e(),l(14,"input",10),e()(),i(15,"div",8)(16,"div",9)(17,"label"),o(18,"Apellido"),e(),l(19,"input",11),e()()(),i(20,"div",7)(21,"div",12)(22,"div",9)(23,"label"),o(24,"C\xE9dula"),e(),l(25,"input",13),e()(),i(26,"div",12)(27,"div",9)(28,"label"),o(29,"Tel\xE9fono"),e(),l(30,"input",14),e()(),i(31,"div",12)(32,"div",9)(33,"label"),o(34,"RIF"),e(),l(35,"input",15),e()()(),i(36,"div",7)(37,"div",8)(38,"div",9)(39,"label"),o(40,"Tipo de Servicio"),e(),i(41,"select",16),c("change",function(){return a.onTipoServicioChange()}),i(42,"option",17),o(43,"Seleccione..."),e(),i(44,"option",18),o(45,"Gr\xFAa"),e(),i(46,"option",19),o(47,"Moto"),e(),i(48,"option",20),o(49,"Bater\xEDa"),e()()()()(),E(50,Me,36,0,"div",21)(51,Pe,29,0,"div",22)(52,ye,30,0,"div",23),i(53,"div",24)(54,"div",25)(55,"button",26),o(56),e(),i(57,"button",27),c("click",function(){return a.cancelar()}),o(58," Cancelar "),e()()()()()()()()()),r&2){let d,y,w;m(6),V("",a.modoEdicion?"Editar":"Nuevo"," Proveedor"),m(2),v("formGroup",a.proveedorForm),m(42),v("ngIf",((d=a.proveedorForm.get("tipoServicio"))==null?null:d.value)==="Grua"),m(),v("ngIf",((y=a.proveedorForm.get("tipoServicio"))==null?null:y.value)==="Moto"),m(),v("ngIf",((w=a.proveedorForm.get("tipoServicio"))==null?null:w.value)==="Bateria"),m(3),v("disabled",!a.proveedorForm.valid),m(),V(" ",a.modoEdicion?"Actualizar":"Guardar"," ")}},dependencies:[z,K,te,oe,H,U,ee,ie,J,X,W,Z,Y],encapsulation:2})}return n})();var Ve=[{path:"",component:Ee},{path:"nuevo",component:G},{path:"editar/:id",component:G}],be=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=_({type:n});static \u0275inj=S({imports:[N.forChild(Ve),N]})}return n})();var tt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=_({type:n});static \u0275inj=S({imports:[Q,ne,be,ue,de,fe,ce,ae,ge,me]})}return n})();export{tt as ProveedoresModule};
