import{a as x,b as ce,c as ue,d as C,e as y,f as he}from"./chunk-RHC4AD4N.js";import"./chunk-Z4R7YH6H.js";import{a as g,b as de}from"./chunk-XZRHDCBB.js";import"./chunk-HX3ESI56.js";import{$ as me,A as oe,B as ne,C as ae,D as se,H as le}from"./chunk-66MCY2UZ.js";import{A as te,B as ie,C as re,c as J,e as S,g as K,h as Q,n as X,r as Y,t as $,z as ee}from"./chunk-LWEV5N6L.js";import{f as z,k as w,l as Z,o as H}from"./chunk-6SH7557L.js";import{Ba as j,Eb as P,Gc as D,Hc as a,Hd as q,Jc as N,Lc as O,Ma as v,Mc as T,Na as b,Nc as W,Oc as G,Pc as B,Qb as M,Vb as c,Wa as R,Xb as U,Za as V,_b as I,cc as F,hc as o,ic as n,jc as m,nc as A,qa as p,tc as E,va as f,vc as u,yb as s,zb as l}from"./chunk-XJ56SYHS.js";import"./chunk-DW7GCGLI.js";import"./chunk-BI7C37SH.js";var _=(()=>{class r{constructor(){x.initializeApp(he.firebase)}getFirestore(){return C}getDatabase(){return y}getAuth(){return ue}static \u0275fac=function(i){return new(i||r)};static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var pe=(()=>{class r{afu;router;ngZone;authState;afAuth;afs;showLoader=!1;constructor(e,i,t){this.afu=e,this.router=i,this.ngZone=t,this.afu.authState.subscribe(d=>{this.authState=d})}get isUserAnonymousLoggedIn(){return this.authState!==null?this.authState.isAnonymous:!1}get currentUserId(){return this.authState!==null?this.authState.uid:""}get currentUserName(){return this.authState.email}get currentUser(){return this.authState!==null?this.authState:null}get isUserEmailLoggedIn(){return this.authState!==null&&!this.isUserAnonymousLoggedIn}registerWithEmail(e,i){return this.afu.createUserWithEmailAndPassword(e,i).then(t=>{this.authState=t}).catch(t=>{throw console.log(t),t})}loginWithEmail(e,i){return this.afu.signInWithEmailAndPassword(e,i).then(t=>{this.authState=t}).catch(t=>{throw console.log(t),t})}singout(){this.afu.signOut(),this.router.navigate(["/login"])}SignUp(e,i){return this.afAuth.createUserWithEmailAndPassword(e,i).then(t=>{this.SendVerificationMail(),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["/dashboard/sales"])})}SetUserData(e){let i=this.afs.doc(`users/${e.uid}`),t={email:e.email,displayName:e.displayName,uid:e.uid,photoURL:e.photoURL||"src/favicon.ico",emailVerified:e.emailVerified};return i.delete().then(function(){}).catch(function(d){}),i.set(t,{merge:!0})}SignIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(t=>{t.user.emailVerified!==!0?(this.SetUserData(t.user),this.SendVerificationMail(),this.showLoader=!0):(this.showLoader=!1,this.ngZone.run(()=>{this.router.navigate(["/auth/login"])}))}).catch(t=>{throw t})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}static \u0275fac=function(i){return new(i||r)(f(ce),f(w),f(R))};static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Ce(r,k){if(r&1&&(o(0,"p",11),a(1),n()),r&2){let e=u(2);s(),N(" ",e.errorMessage,"")}}function ye(r,k){if(r&1&&(o(0,"p",11),a(1),n()),r&2){let e=u(2);s(),N(" ",e._error.message," ")}}function _e(r,k){if(r&1){let e=A();o(0,"div",8)(1,"div",9)(2,"form",10),E("ngSubmit",function(){v(e);let t=u();return b(t.Submit())}),M(3,Ce,2,1,"p",11)(4,ye,2,1,"p",11),o(5,"p",12),a(6,"Inicio de sesi\xF3n"),n(),o(7,"div",13)(8,"div",14)(9,"label",15),a(10,"Usuario"),o(11,"sup",16),a(12,"*"),n()(),m(13,"input",17),n(),o(14,"div",18)(15,"label",19),a(16,"Contrase\xF1a"),o(17,"sup",16),a(18,"*"),n(),o(19,"a",20),a(20,"Recuperar contrase\xF1a"),n()(),o(21,"div",21),m(22,"input",22),o(23,"a",23),E("click",function(){v(e);let t=u();return b(t.togglePassword())}),m(24,"i"),n()(),o(25,"div",24)(26,"div",25),m(27,"input",26),o(28,"label",27),a(29," Recordar contrase\xF1a "),n()()()()(),o(30,"div",28)(31,"button",29),a(32,"Enviar"),n()(),o(33,"div",30)(34,"p",31),a(35,"\xBFNo tienes una cuenta? "),o(36,"a",32),a(37,"Registrate ahora"),n()()(),o(38,"div",33)(39,"button",34),m(40,"i",35),n(),o(41,"button",36),m(42,"i",37),n(),o(43,"button",38),m(44,"i",39),n()()()()()}if(r&2){let e=u();s(2),c("formGroup",e.loginForm),s(),F(e.errorMessage.length>0?3:-1),s(),F(e._error.message.length>0?4:-1),s(9),c("ngModel",e.email),s(9),c("type",e.showPassword?"text":"password")("ngModel",e.password),s(2),I("ri-eye-",e.toggleClass," align-middle"),s(7),I("btn btn-primary",e.disabled,""),U("loader--text",e.authservice.showLoader),c("disabled",!e.loginForm.valid||e.authservice.showLoader)}}var ze=(()=>{class r{document;elementRef;sanitizer;authservice;router;formBuilder;renderer;firebaseService;toastr;showPassword=!1;toggleClass="off-line";active="Angular";firestoreModule;databaseModule;authModule;togglePassword(){this.showPassword=!this.showPassword,this.toggleClass==="line"?this.toggleClass="off-line":this.toggleClass="line"}disabled="";constructor(e,i,t,d,L,h,fe,ve,be){this.document=e,this.elementRef=i,this.sanitizer=t,this.authservice=d,this.router=L,this.formBuilder=h,this.renderer=fe,this.firebaseService=ve,this.toastr=be,e.body.classList.add("authentication-background");let Me=this.renderer.selectRootElement("body",!0)}ngOnDestroy(){document.body.classList.remove("authentication-background")}ngOnInit(){this.loginForm=this.formBuilder.group({username:["spruko@admin.com",[S.required,S.email]],password:["sprukoadmin",S.required]}),this.firestoreModule=this.firebaseService.getFirestore(),this.databaseModule=this.firebaseService.getDatabase(),this.authModule=this.firebaseService.getAuth()}email="spruko@admin.com";password="sprukoadmin";errorMessage="";_error={name:"",message:""};clearErrorMessage(){this.errorMessage="",this._error={name:"",message:""}}login(){this.clearErrorMessage(),this.validateForm(this.email,this.password)?this.authservice.loginWithEmail(this.email,this.password).then(()=>{this.router.navigate(["/dashboard-servicios"]),console.clear(),this.toastr.success("Inicio de sesi\xF3n exitoso","GoCast Admin",{timeOut:3e3,positionClass:"toast-top-right"})}).catch(e=>{this._error=e,this.router.navigate(["/"])}):this.toastr.error("Credenciales inv\xE1lidas","GoCast Admin",{timeOut:3e3,positionClass:"toast-top-right"})}validateForm(e,i){return e.length===0?(this.errorMessage="please enter email id",!1):i.length===0?(this.errorMessage="please enter password",!1):i.length<6?(this.errorMessage="password should be at least 6 char",!1):(this.errorMessage="",!0)}loginForm;error="";get form(){return this.loginForm.controls}Submit(){console.log(this.loginForm),this.loginForm.controls.username.value==="spruko@admin.com"&&this.loginForm.controls.password.value==="sprukoadmin"?(this.router.navigate(["/dashboard-servicios"]),this.toastr.success("Inicio de sesi\xF3n exitoso","GoCast Admin",{timeOut:3e3,positionClass:"toast-top-right"})):this.toastr.error("Credenciales inv\xE1lidas","GoCast Admin",{timeOut:3e3,positionClass:"toast-top-right"})}static \u0275fac=function(i){return new(i||r)(l(q),l(V),l(z),l(pe),l(w),l(te),l(P),l(_),l(g))};static \u0275cmp=j({type:r,selectors:[["app-login"]],standalone:!0,features:[G([_,{provide:g,useClass:g}]),B],decls:8,vars:2,consts:[["nav","ngbNav"],[1,"container","custom-tabs"],[1,"row","justify-content-center","align-items-center","authentication","authentication-basic","h-100"],[1,"col-xxl-5","col-xl-5","col-lg-5","col-md-8","col-sm-12","col-12"],["ngbNav","",1,"nav-tabs","rounded-2","justify-content-center","border-bottom-0",3,"activeIdChange","activeId"],["ngbNavItem","Angular"],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"card","custom-card","my-4"],[1,"card-body","p-5"],[3,"ngSubmit","formGroup"],[1,"text-danger"],[1,"h5","mb-2","text-center"],[1,"row","gy-3"],[1,"col-xl-12"],["for","signin-username",1,"form-label","text-default"],[1,"fs-12","text-danger"],["type","text","id","signin-username","placeholder","user name","autocomplete","","formControlName","username","required","",1,"form-control",3,"ngModel"],[1,"col-xl-12","mb-2"],["for","signin-password",1,"form-label","text-default","d-block"],["routerLink","/authentication/reset-password/basic",1,"float-end","fw-normal","text-muted"],[1,"position-relative"],["type","password","id","signin-password","autocomplete","","placeholder","password","autocomplete","","placeholder","Password","formControlName","password","required","",1,"form-control","create-password-input",3,"type","ngModel"],["href","javascript:void(0);","id","button-addon2",1,"show-password-button","text-muted",3,"click"],[1,"mt-2"],[1,"form-check"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input"],["for","defaultCheck1",1,"form-check-label","text-muted","fw-normal"],[1,"d-grid","mt-4"],["autofocus","",3,"disabled"],[1,"text-center"],[1,"text-muted","mt-3","mb-0"],["routerLink","/authentication/sign-up/basic",1,"text-primary"],[1,"btn-list","text-center","mt-3"],["type","button",1,"btn","btn-icon","btn-wave","btn-primary-light"],[1,"ri-facebook-line","lh-1","align-center","fs-17"],["type","button",1,"btn","btn-icon","btn-wave","btn-primary1-light"],[1,"ri-twitter-x-line","lh-1","align-center","fs-17"],["type","button",1,"btn","btn-icon","btn-wave","btn-primary2-light"],[1,"ri-instagram-line","lh-1","align-center","fs-17"]],template:function(i,t){if(i&1){let d=A();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4,0),W("activeIdChange",function(h){return v(d),T(t.active,h)||(t.active=h),b(h)}),o(5,"li",5),M(6,_e,45,15,"ng-template",6),n()(),m(7,"div",7),n()()()}if(i&2){let d=D(4);s(3),O("activeId",t.active),s(4),c("ngbNavOutlet",d)}},dependencies:[H,Z,me,oe,se,ae,ne,le,ie,X,J,K,Q,ee,re,Y,$,x,y,C,de],styles:[".firebase{width:30px;height:30px}  .nav-tabs{border-color:none!important}"]})}return r})();export{ze as LoginComponent};
